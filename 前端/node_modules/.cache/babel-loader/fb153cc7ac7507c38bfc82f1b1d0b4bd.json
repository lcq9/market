{"remainingRequest":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\src\\views\\front\\goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\src\\views\\front\\goods.vue","mtime":1663510603683},{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\babel.config.js","mtime":1621952491009},{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA-workspace\\综合三\\源码+数据库+导入视频\\源码\\前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgQVBJIGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmNvbnN0IHVybCA9ICIvYXBpL3ZpZGVvLyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiR29vZHMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlczogW10sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgZW50aXR5OiB7fSwKICAgICAgYWRkcmVzczogJycsCiAgICAgIG1haW5JbWc6ICcnLAogICAgICBjYXJ0SWNvbjogcmVxdWlyZSgnLi4vLi4vYXNzZXRzL+i0reeJqei9pi0yMy5wbmcnKSwKICAgICAgcHJhaXNlQWN0aXZlSWNvbjogcmVxdWlyZSgiLi4vLi4vYXNzZXRzL+eCuei1ni3mv4DmtLsucG5nIiksCiAgICAgIGNvbGxlY3RBY3RpdmVJY29uOiByZXF1aXJlKCIuLi8uLi9hc3NldHMv5pS26JePLea/gOa0uy5wbmciKSwKICAgICAgbnVtOiAxLAogICAgICBpZDogMSwKICAgICAgdXNlcjoge30sCiAgICAgIGdvb2RzOiB7CiAgICAgICAgaW1nczogW10KICAgICAgfSwKICAgICAgcHJhaXNlRmxhZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy51c2VyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpID8gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpIDoge307CiAgICB0aGlzLmlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICB0aGlzLmxvYWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNvbGxlY3QoKSB7CiAgICAgIEFQSS5wb3N0KCIvYXBpL2NvbGxlY3QiLCB7CiAgICAgICAgZ29vZHNOYW1lOiB0aGlzLmdvb2RzLm5hbWUsCiAgICAgICAgZ29vZHNJbWc6IHRoaXMuZ29vZHMuaW1nc1swXSwKICAgICAgICBnb29kc0lkOiB0aGlzLmdvb2RzLmlkLAogICAgICAgIHVzZXJJZDogdGhpcy51c2VyLmlkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLmlLbol4/miJDlip8iLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMubG9hZCgpOwogICAgICB9KTsKICAgIH0sCiAgICBwcmFpc2UoKSB7CiAgICAgIGlmICh0aGlzLnByYWlzZUZsYWcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLmgqjlt7Lngrnov4fotZ4iLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMucHJhaXNlRmxhZyA9IHRydWU7CiAgICAgIHRoaXMuZW50aXR5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdvb2RzKSk7CiAgICAgIHRoaXMuZW50aXR5LnByYWlzZSArPSAxOwogICAgICB0aGlzLmVudGl0eS5pbWdzID0gbnVsbDsKICAgICAgQVBJLnB1dCgiL2FwaS9nb29kcyIsIHRoaXMuZW50aXR5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi54K56LWe5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSk7CiAgICB9LAogICAgbG9hZE1lc3NhZ2UoKSB7CiAgICAgIEFQSS5nZXQoIi9hcGkvbWVzc2FnZS9mb3JlaWduLyIgKyB0aGlzLmdvb2RzLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBidXlOb3coKSB7CiAgICAgIGlmICh0aGlzLmdvb2RzLnN0b3JlIC0gdGhpcy5udW0gPCAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBtZXNzYWdlOiAn5ZWG5ZOB5bqT5a2Y5LiN6Laz77yBJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgY2FydCA9IFtdOwogICAgICBjYXJ0LnB1c2goewogICAgICAgIGNvdW50OiB0aGlzLm51bSwKICAgICAgICBnb29kczogdGhpcy5nb29kcywKICAgICAgICBnb29kc0lkOiB0aGlzLmdvb2RzLmlkCiAgICAgIH0pOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldENhcnRzIiwgY2FydCk7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvZnJvbnQvcHJlT3JkZXIiKTsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICAvLyDmlrDlop7or4TorroKICAgICAgaWYgKCF0aGlzLnVzZXIudXNlcm5hbWUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor7fnmbvlvZUiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdGhpcy5lbnRpdHkuY29udGVudCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuivt+Whq+WGmeWGheWuuSIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgQVBJLnBvc3QoIi9hcGkvbWVzc2FnZSIsIHRoaXMuZW50aXR5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi6K+E6K665oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLmVudGl0eSA9IHt9OwogICAgICAgIHRoaXMubG9hZE1lc3NhZ2UoKTsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmVudGl0eSA9IHt9OwogICAgfSwKICAgIHJlUmVwbHkoaWQpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZW50aXR5LnBhcmVudElkID0gaWQ7CiAgICB9LAogICAgcmVwbHkoKSB7CiAgICAgIHRoaXMuZW50aXR5LmNvbnRlbnQgPSB0aGlzLmVudGl0eS5yZXBseTsKICAgICAgdGhpcy5zYXZlKCk7CiAgICB9LAogICAgZGVsKGlkKSB7CiAgICAgIEFQSS5kZWxldGUoIi9hcGkvbWVzc2FnZS8iICsgaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8iLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkTWVzc2FnZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRDYXJ0KCkgewogICAgICBpZiAoIXRoaXMudXNlci5pZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+eZu+W9le+8gScKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZ29vZHMuc3RvcmUgLSB0aGlzLm51bSA8IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfllYblk4HlupPlrZjkuI3otrPvvIEnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIEFQSS5wb3N0KCIvYXBpL2NhcnQiLCB7CiAgICAgICAgZ29vZHNJZDogdGhpcy5nb29kcy5pZCwKICAgICAgICBjb3VudDogdGhpcy5udW0sCiAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuaWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yqg5YWl5oiQ5Yqf77yBJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3coaW1nKSB7CiAgICAgIHRoaXMubWFpbkltZyA9IGltZzsKICAgICAgY29uc29sZS5sb2coaW1nKTsKICAgIH0sCiAgICBsb2FkKCkgewogICAgICBBUEkuZ2V0KCIvYXBpL2dvb2RzLyIgKyB0aGlzLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5nb29kcyA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMubG9hZE1lc3NhZ2UoKTsKCiAgICAgICAgLy8g5aSE55CG5Zu+54mHCiAgICAgICAgaWYgKCF0aGlzLmdvb2RzLmltZ3MpIHsKICAgICAgICAgIHRoaXMuZ29vZHMuaW1ncyA9IFsnJ107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZ29vZHMuaW1ncyA9IEpTT04ucGFyc2UodGhpcy5nb29kcy5pbWdzKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5tYWluSW1nID0gdGhpcy5nb29kcy5pbWdzWzBdOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["API","url","name","data","messages","dialogFormVisible","entity","address","mainImg","cartIcon","require","praiseActiveIcon","collectActiveIcon","num","id","user","goods","imgs","praiseFlag","created","sessionStorage","getItem","JSON","parse","$route","query","load","methods","collect","post","goodsName","goodsImg","goodsId","userId","then","res","code","$message","message","type","msg","praise","stringify","put","loadMessage","get","buyNow","store","cart","push","count","$store","commit","$router","replace","save","username","content","cancel","reReply","parentId","reply","del","delete","addCart","show","img","console","log"],"sources":["src/views/front/goods.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <div style=\"margin-top: 10px\">\r\n      <!--      商品-->\r\n      <el-row :gutter=\"10\">\r\n        <!--    图片-->\r\n        <el-col :span=\"8\">\r\n          <el-card>\r\n            <div>\r\n              <el-image :src=\"mainImg\"></el-image>\r\n            </div>\r\n            <div\r\n                style=\"margin-top: 20px; display: flex;  flex-wrap: wrap; flex-direction: row; justify-content: flex-start\">\r\n              <div style=\"flex: 1; padding: 5px\" v-for=\"(item, index) in goods.imgs\" :key=\"item\">\r\n                <el-image style=\"width: 60px; height: 60px;\" fit=\"contain\" :src=\"item\"\r\n                          @mouseover=\"show(item)\"></el-image>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n\r\n        <!--    商品细节-->\r\n        <el-col :span=\"16\">\r\n          <el-card>\r\n            <div style=\"text-align: right\">\r\n              <div style=\"display: inline-block; cursor: pointer;\"  @click=\"collect\">\r\n                <img :src=\"collectActiveIcon\" alt=\"收藏\" style=\"width: 15px; \">\r\n                <span style=\"position: relative; bottom: 3px; font-size: 12px; left: 5px; color: #666\">收藏</span>\r\n              </div>\r\n              <div style=\"display: inline-block; cursor: pointer; margin-left: 20px\" @click=\"praise\">\r\n                <img :src=\"praiseActiveIcon\" alt=\"点赞\" style=\"width: 15px; \">\r\n                <span style=\"position: relative; bottom: 2px; color: #666; margin-left: 5px\">{{ goods.praise }}</span>\r\n              </div>\r\n            </div>\r\n            <div style=\"padding: 10px 0; font-size: 20px; font-weight: bold\">{{ goods.name }}</div>\r\n            <div style=\"padding: 10px 0; color: #666; font-size: 14px\">{{ goods.description }}</div>\r\n            <div style=\"padding: 10px 0; color: #999;\">\r\n              <span>上架时间</span>\r\n              <span style=\"margin-left: 20px; color: #666\">{{ goods.createTime }}</span>\r\n            </div>\r\n\r\n            <div style=\"padding: 10px 0\">\r\n              <span style=\"color: #999\">抢购价</span>\r\n              <span style=\"margin-left: 10px; color: orangered; font-size: 20px\">￥ {{ goods.realPrice }}</span>\r\n              <span style=\"color: orangered; margin-left: 10px\" v-if=\"goods.discount < 1\"> ({{ (goods.discount * 10).toFixed(1) }}折)</span>\r\n            </div>\r\n\r\n            <div v-if=\"goods.discount < 1\" style=\"padding: 10px 0; text-decoration:line-through; color: #999\">\r\n              原价：{{ goods.price }}\r\n            </div>\r\n            <div style=\"padding: 10px 0; color: #999\">\r\n              库存：{{ goods.store }}\r\n            </div>\r\n\r\n            <div style=\"padding: 10px 0; color: #999;\">\r\n              <span>服务</span>\r\n              <span style=\"margin-left: 20px; color: #666\">\r\n                由“电商平台”发货，并提供售后服务。 23:55前完成下单，预计明天可送达\r\n              </span>\r\n            </div>\r\n\r\n            <div style=\"margin-top: 20px; padding: 10px 0\">\r\n              <el-input-number v-model=\"num\" :min=\"1\" :max=\"10\" label=\"购买数量\" style=\"width: 100px\"></el-input-number>\r\n              <el-button style=\"margin-left: 10px; background-color: orangered; color: white; position: relative\"\r\n                         @click=\"addCart\">\r\n                <img :src=\"cartIcon\" style=\"width: 20px; position: absolute; left: 8px; top: 5px\">\r\n                <span style=\"margin-left: 20px\">加入购物车</span>\r\n              </el-button>\r\n              <el-button style=\"margin-left: 10px; background-color: orangered; color: white\" @click=\"buyNow\">立即购买\r\n              </el-button>\r\n            </div>\r\n\r\n          </el-card>\r\n        </el-col>\r\n\r\n      </el-row>\r\n\r\n      <!--      评论-->\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <div style=\"margin-top: 10px; margin-bottom: 80px\">\r\n            <el-card>\r\n              <!--              <div style=\"padding: 20px; color: #888\">-->\r\n              <!--                <div>-->\r\n              <!--                  <el-input type=\"textarea\" :rows=\"3\" v-model=\"entity.content\"></el-input>-->\r\n              <!--                  <div style=\"text-align: right; padding: 10px\"><el-button type=\"primary\" @click=\"save\">评论</el-button></div>-->\r\n              <!--                </div>-->\r\n              <!--              </div>-->\r\n\r\n              <div\r\n                  style=\"padding-bottom: 10px; margin-bottom: 20px; border-bottom: 2px solid orangered; font-size: 20px\">\r\n                商品评论\r\n              </div>\r\n\r\n              <div style=\"display: flex; padding: 20px\" v-for=\"item in messages\">\r\n                <div style=\"text-align: center; flex: 1\">\r\n                  <el-image :src=\"item.avatar\" style=\"width: 60px; height: 60px; border-radius: 50%\"></el-image>\r\n                </div>\r\n                <div style=\"padding: 0 10px; flex: 5\">\r\n                  <div><b style=\"font-size: 14px\">{{ item.username }}</b></div>\r\n                  <div style=\"padding: 10px 0; color: #888\">\r\n                    {{ item.content }}\r\n                    <el-button type=\"text\" size=\"mini\" @click=\"del(item.id)\" v-if=\"item.username === user.username\">删除\r\n                    </el-button>\r\n                  </div>\r\n                  <div style=\"background-color: #eee; padding: 10px\" v-if=\"item.parentMessage\">{{\r\n                      item.username\r\n                    }}：{{ item.parentMessage.content }}\r\n                  </div>\r\n                  <div style=\"color: #888; font-size: 12px\">\r\n                    <span>{{ item.time }}</span>\r\n                    <!--                    <el-button type=\"text\" style=\"margin-left: 20px\" @click=\"reReply(item.id)\">回复</el-button>-->\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <el-dialog title=\"回复信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\"\r\n                         :close-on-click-modal=\"false\">\r\n                <el-form :model=\"entity\">\r\n                  <el-form-item label=\"内容\" label-width=\"100px\">\r\n                    <el-input v-model=\"entity.reply\" autocomplete=\"off\" type=\"textarea\" :rows=\"3\"></el-input>\r\n                  </el-form-item>\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                  <el-button @click=\"cancel\">取 消</el-button>\r\n                  <el-button type=\"primary\" @click=\"reply\">确 定</el-button>\r\n                </div>\r\n              </el-dialog>\r\n            </el-card>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"@/utils/request\";\r\n\r\nconst url = \"/api/video/\"\r\n\r\nexport default {\r\n  name: \"Goods\",\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      dialogFormVisible: false,\r\n      entity: {},\r\n      address: '',\r\n      mainImg: '',\r\n      cartIcon: require('../../assets/购物车-23.png'),\r\n      praiseActiveIcon: require(\"../../assets/点赞-激活.png\"),\r\n      collectActiveIcon: require(\"../../assets/收藏-激活.png\"),\r\n      num: 1,\r\n      id: 1,\r\n      user: {},\r\n      goods: {imgs: []},\r\n      praiseFlag: false\r\n    };\r\n  },\r\n  created() {\r\n    this.user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {}\r\n    this.id = this.$route.query.id\r\n    this.load()\r\n  },\r\n  methods: {\r\n    collect() {\r\n      API.post(\"/api/collect\", {\r\n        goodsName: this.goods.name,\r\n        goodsImg: this.goods.imgs[0],\r\n        goodsId: this.goods.id,\r\n        userId: this.user.id\r\n      }).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            message: \"收藏成功\",\r\n            type: \"success\"\r\n          });\r\n        } else {\r\n          this.$message({\r\n            message: res.msg,\r\n            type: \"error\"\r\n          });\r\n        }\r\n        this.load();\r\n      })\r\n    },\r\n    praise() {\r\n      if (this.praiseFlag) {\r\n        this.$message({\r\n          message: \"您已点过赞\",\r\n          type: \"warning\"\r\n        });\r\n        return\r\n      }\r\n      this.praiseFlag = true\r\n      this.entity = JSON.parse(JSON.stringify(this.goods))\r\n      this.entity.praise += 1\r\n      this.entity.imgs = null\r\n      API.put(\"/api/goods\", this.entity).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            message: \"点赞成功\",\r\n            type: \"success\"\r\n          });\r\n        } else {\r\n          this.$message({\r\n            message: res.msg,\r\n            type: \"error\"\r\n          });\r\n        }\r\n        this.load();\r\n      })\r\n    },\r\n    loadMessage() {\r\n      API.get(\"/api/message/foreign/\" + this.goods.id).then(res => {\r\n        this.messages = res.data;\r\n      })\r\n    },\r\n    buyNow() {\r\n      if ((this.goods.store - this.num) < 0) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '商品库存不足！'\r\n        })\r\n        return\r\n      }\r\n      let cart = []\r\n      cart.push({count: this.num, goods: this.goods, goodsId: this.goods.id})\r\n      this.$store.commit(\"setCarts\", cart)\r\n      this.$router.replace(\"/front/preOrder\")\r\n    },\r\n    save() {  // 新增评论\r\n      if (!this.user.username) {\r\n        this.$message({\r\n          message: \"请登录\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      if (!this.entity.content) {\r\n        this.$message({\r\n          message: \"请填写内容\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      API.post(\"/api/message\", this.entity).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            message: \"评论成功\",\r\n            type: \"success\"\r\n          });\r\n        } else {\r\n          this.$message({\r\n            message: res.msg,\r\n            type: \"error\"\r\n          });\r\n        }\r\n        this.entity = {}\r\n        this.loadMessage();\r\n        this.dialogFormVisible = false;\r\n      })\r\n    },\r\n    cancel() {\r\n      this.dialogFormVisible = false;\r\n      this.entity = {};\r\n    },\r\n    reReply(id) {\r\n      this.dialogFormVisible = true;\r\n      this.entity.parentId = id;\r\n    },\r\n    reply() {\r\n      this.entity.content = this.entity.reply;\r\n      this.save();\r\n    },\r\n    del(id) {\r\n      API.delete(\"/api/message/\" + id).then(res => {\r\n        this.$message({\r\n          message: \"删除成功\",\r\n          type: \"success\"\r\n        });\r\n        this.loadMessage()\r\n      })\r\n    },\r\n    addCart() {\r\n      if (!this.user.id) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '请登录！'\r\n        })\r\n        return\r\n      }\r\n      if ((this.goods.store - this.num) < 0) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '商品库存不足！'\r\n        })\r\n        return\r\n      }\r\n      API.post(\"/api/cart\", {goodsId: this.goods.id, count: this.num, userId: this.user.id}).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '加入成功！'\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: 'error',\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    show(img) {\r\n      this.mainImg = img\r\n      console.log(img)\r\n    },\r\n    load() {\r\n      API.get(\"/api/goods/\" + this.id).then(res => {\r\n        this.goods = res.data\r\n\r\n        this.loadMessage()\r\n\r\n        // 处理图片\r\n        if (!this.goods.imgs) {\r\n          this.goods.imgs = ['']\r\n        } else {\r\n          this.goods.imgs = JSON.parse(this.goods.imgs)\r\n        }\r\n        this.mainImg = this.goods.imgs[0]\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA,OAAAA,GAAA;AAEA,MAAAC,GAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,iBAAA;MACAC,MAAA;MACAC,OAAA;MACAC,OAAA;MACAC,QAAA,EAAAC,OAAA;MACAC,gBAAA,EAAAD,OAAA;MACAE,iBAAA,EAAAF,OAAA;MACAG,GAAA;MACAC,EAAA;MACAC,IAAA;MACAC,KAAA;QAAAC,IAAA;MAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAJ,IAAA,GAAAK,cAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,cAAA,CAAAC,OAAA;IACA,KAAAP,EAAA,QAAAU,MAAA,CAAAC,KAAA,CAAAX,EAAA;IACA,KAAAY,IAAA;EACA;EACAC,OAAA;IACAC,QAAA;MACA5B,GAAA,CAAA6B,IAAA;QACAC,SAAA,OAAAd,KAAA,CAAAd,IAAA;QACA6B,QAAA,OAAAf,KAAA,CAAAC,IAAA;QACAe,OAAA,OAAAhB,KAAA,CAAAF,EAAA;QACAmB,MAAA,OAAAlB,IAAA,CAAAD;MACA,GAAAoB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;QACA;UACA,KAAAF,QAAA;YACAC,OAAA,EAAAH,GAAA,CAAAK,GAAA;YACAD,IAAA;UACA;QACA;QACA,KAAAb,IAAA;MACA;IACA;IACAe,OAAA;MACA,SAAAvB,UAAA;QACA,KAAAmB,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,KAAArB,UAAA;MACA,KAAAZ,MAAA,GAAAgB,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAoB,SAAA,MAAA1B,KAAA;MACA,KAAAV,MAAA,CAAAmC,MAAA;MACA,KAAAnC,MAAA,CAAAW,IAAA;MACAjB,GAAA,CAAA2C,GAAA,oBAAArC,MAAA,EAAA4B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;QACA;UACA,KAAAF,QAAA;YACAC,OAAA,EAAAH,GAAA,CAAAK,GAAA;YACAD,IAAA;UACA;QACA;QACA,KAAAb,IAAA;MACA;IACA;IACAkB,YAAA;MACA5C,GAAA,CAAA6C,GAAA,gCAAA7B,KAAA,CAAAF,EAAA,EAAAoB,IAAA,CAAAC,GAAA;QACA,KAAA/B,QAAA,GAAA+B,GAAA,CAAAhC,IAAA;MACA;IACA;IACA2C,OAAA;MACA,SAAA9B,KAAA,CAAA+B,KAAA,QAAAlC,GAAA;QACA,KAAAwB,QAAA;UACAE,IAAA;UACAD,OAAA;QACA;QACA;MACA;MACA,IAAAU,IAAA;MACAA,IAAA,CAAAC,IAAA;QAAAC,KAAA,OAAArC,GAAA;QAAAG,KAAA,OAAAA,KAAA;QAAAgB,OAAA,OAAAhB,KAAA,CAAAF;MAAA;MACA,KAAAqC,MAAA,CAAAC,MAAA,aAAAJ,IAAA;MACA,KAAAK,OAAA,CAAAC,OAAA;IACA;IACAC,KAAA;MAAA;MACA,UAAAxC,IAAA,CAAAyC,QAAA;QACA,KAAAnB,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,UAAAjC,MAAA,CAAAmD,OAAA;QACA,KAAApB,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACAvC,GAAA,CAAA6B,IAAA,sBAAAvB,MAAA,EAAA4B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;QACA;UACA,KAAAF,QAAA;YACAC,OAAA,EAAAH,GAAA,CAAAK,GAAA;YACAD,IAAA;UACA;QACA;QACA,KAAAjC,MAAA;QACA,KAAAsC,WAAA;QACA,KAAAvC,iBAAA;MACA;IACA;IACAqD,OAAA;MACA,KAAArD,iBAAA;MACA,KAAAC,MAAA;IACA;IACAqD,QAAA7C,EAAA;MACA,KAAAT,iBAAA;MACA,KAAAC,MAAA,CAAAsD,QAAA,GAAA9C,EAAA;IACA;IACA+C,MAAA;MACA,KAAAvD,MAAA,CAAAmD,OAAA,QAAAnD,MAAA,CAAAuD,KAAA;MACA,KAAAN,IAAA;IACA;IACAO,IAAAhD,EAAA;MACAd,GAAA,CAAA+D,MAAA,mBAAAjD,EAAA,EAAAoB,IAAA,CAAAC,GAAA;QACA,KAAAE,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA,KAAAK,WAAA;MACA;IACA;IACAoB,QAAA;MACA,UAAAjD,IAAA,CAAAD,EAAA;QACA,KAAAuB,QAAA;UACAE,IAAA;UACAD,OAAA;QACA;QACA;MACA;MACA,SAAAtB,KAAA,CAAA+B,KAAA,QAAAlC,GAAA;QACA,KAAAwB,QAAA;UACAE,IAAA;UACAD,OAAA;QACA;QACA;MACA;MACAtC,GAAA,CAAA6B,IAAA;QAAAG,OAAA,OAAAhB,KAAA,CAAAF,EAAA;QAAAoC,KAAA,OAAArC,GAAA;QAAAoB,MAAA,OAAAlB,IAAA,CAAAD;MAAA,GAAAoB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAE,IAAA;YACAD,OAAA;UACA;QACA;UACA,KAAAD,QAAA;YACAE,IAAA;YACAD,OAAA,EAAAH,GAAA,CAAAK;UACA;QACA;MACA;IACA;IACAyB,KAAAC,GAAA;MACA,KAAA1D,OAAA,GAAA0D,GAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;IACA;IACAxC,KAAA;MACA1B,GAAA,CAAA6C,GAAA,sBAAA/B,EAAA,EAAAoB,IAAA,CAAAC,GAAA;QACA,KAAAnB,KAAA,GAAAmB,GAAA,CAAAhC,IAAA;QAEA,KAAAyC,WAAA;;QAEA;QACA,UAAA5B,KAAA,CAAAC,IAAA;UACA,KAAAD,KAAA,CAAAC,IAAA;QACA;UACA,KAAAD,KAAA,CAAAC,IAAA,GAAAK,IAAA,CAAAC,KAAA,MAAAP,KAAA,CAAAC,IAAA;QACA;QACA,KAAAT,OAAA,QAAAQ,KAAA,CAAAC,IAAA;MACA;IACA;EACA;AACA"}]}